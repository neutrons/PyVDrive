This is the design document for PyVDrive

Business Model
--------------

Generating GSAS/Fullprof Data File
==================================

One of the main goals to reduce data via VDrive is to generate
GSAS/Fullprof data file.

Calibration File
################

There are many **calibrations** that are used in the powder data reduction.
In order to make the documents clear and consistent, 
the nomenclature below is defined for them.

- Calibration File

*Calibration file* is used for *vanadium* calibration.
Each run will corresponds to a specific vanadium run.

A systematic approach to map an experiment run to a vanadium calibration run
is developed by the instrument scientist.
The mapping can be established by some specific sample logs' value.
For example, ... ...

- Time-focus File

Time focusing is called *calibration* in Mantid's algorithm SNSPowderReduction.
For VUCLAN, time focusing file is rather **fixed** than being specified by users.
Therefore, it is hidden to user from the GUI how the time focusing (calibration) file 
is specified.


Technical Model
---------------


Data structure for slicing event data
=====================================

Container for splitters
#######################

Splitters are stored in Mantid SplittersWorkspace.

Splitters are managed by *SampleLogHelper.SampleLogManager* in PyVDrive. 
There are two ways to define **key** for the *SplittersWorkspace*

1. *sample log's name*, 
   if the splitters are generated by sample log's value
2. *''__time__''*, if the splitters are generated by time.

Limitation
##########

The way to determine the key for the splitter will wipe out the splitter that
are generated earlier with same log name or time.
